<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>想いやスキルが収入に繋がる理念マッチ転職</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="app-container">
    <!-- Main Content -->
    <main class="main-content">
      <div class="form-container">
        <!-- Progress Indicator -->
        <div class="progress-indicator">
          <div class="step active" data-step="1">01</div>
          <div class="step" data-step="2">02</div>
          <div class="step" data-step="3">03</div>
          <div class="step" data-step="4">04</div>
          <div class="step" data-step="5">05</div>
        </div>

        <!-- Form Steps -->
        <form id="multiStepForm" class="multi-step-form">
           
          <!-- Step 1: 転職重視項目 -->
          <div class="form-step active" data-step="1">
            <h2 class="step-title">想いやスキルが収入に繋がる理念マッチ転職</h2>
            <p class="step-description">転職の時に重視するのは？</p>
             
            <div class="priority-grid">
              <label class="priority-option">
                <input type="radio" name="priority" value="vision">
                <span class="priority-text">ビジョン</span>
              </label>
              <label class="priority-option">
                <input type="radio" name="priority" value="fulfillment">
                <span class="priority-text">やりがい</span>
              </label>
              <label class="priority-option selected">
                <input type="radio" name="priority" value="salary">
                <span class="priority-text">給与</span>
              </label>
              <label class="priority-option">
                <input type="radio" name="priority" value="location">
                <span class="priority-text">勤務地</span>
              </label>
              <label class="priority-option">
                <input type="radio" name="priority" value="atmosphere">
                <span class="priority-text">雰囲気</span>
              </label>
              <label class="priority-option">
                <input type="radio" name="priority" value="benefits">
                <span class="priority-text">福利厚生</span>
              </label>
            </div>
          </div>

          <!-- Step 2: 資格選択 -->
          <div class="form-step" data-step="2">
            <h2 class="step-title">想いやスキルが収入に繋がる理念マッチ転職</h2>
            <p class="step-description">持っている資格を教えてください。</p>
            <p class="step-note">※複数選択可</p>
             
            <div class="qualification-grid">
              <label class="qualification-option">
                <input type="checkbox" name="qualifications" value="service_manager">
                <span class="qualification-text">サービス管理責任者</span>
              </label>
              <label class="qualification-option">
                <input type="checkbox" name="qualifications" value="care_worker">
                <span class="qualification-text">介護福祉士</span>
              </label>
              <label class="qualification-option selected">
                <input type="checkbox" name="qualifications" value="child_development_manager">
                <span class="qualification-text">児童発達管理責任者</span>
              </label>
              <label class="qualification-option">
                <input type="checkbox" name="qualifications" value="childcare_worker">
                <span class="qualification-text">保育士</span>
              </label>
              <label class="qualification-option">
                <input type="checkbox" name="qualifications" value="counselor">
                <span class="qualification-text">相談支援専門員</span>
              </label>
              <label class="qualification-option selected">
                <input type="checkbox" name="qualifications" value="social_worker">
                <span class="qualification-text">社会福祉士</span>
              </label>
              <label class="qualification-option">
                <input type="checkbox" name="qualifications" value="nurse">
                <span class="qualification-text">看護師</span>
              </label>
              <label class="qualification-option">
                <input type="checkbox" name="qualifications" value="other">
                <span class="qualification-text">その他</span>
              </label>
            </div>
          </div>

          <!-- Step 3: 個人情報 -->
          <div class="form-step" data-step="3">
            <h2 class="step-title">想いやスキルが収入に繋がる理念マッチ転職</h2>
            <p class="step-description">あなたについて教えてください。</p>
             
            <div class="personal-info-form">
              <div class="form-field">
                <label class="form-label">(1) お住まいの地域</label>
                <input type="text" class="form-input" placeholder="都道府県を入力" name="address">
              </div>
              <div class="form-field">
                <label class="form-label">(2) お名前</label>
                <input type="text" class="form-input" placeholder="フルネーム入力" name="name">
              </div>
              <div class="form-field">
                <label class="form-label">(3) 年齢</label>
                <input type="number" class="form-input" placeholder="年齢を入力" name="age" min="18" max="100">
              </div>
              <div class="form-field">
                <label class="form-label">(4) 電話番号</label>
                <input type="tel" class="form-input" placeholder="000-0000-0000" name="phone">
              </div>
              <div class="form-field">
                <label class="form-label">(5) メールアドレス</label>
                <input type="email" class="form-input" placeholder="menlabo@job.co.jp" name="email">
              </div>
            </div>
          </div>

          <!-- Step 4: 利用規約 -->
          <div class="form-step" data-step="4">
            <h2 class="step-title">利用規約に同意する</h2>
             
            <div class="terms-container">
              <div class="terms-text-area">
                <p>ダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキストダミーテキスト</p>
              </div>
               
              <div class="checkbox-container">
                <label class="checkbox-option">
                  <input type="checkbox" name="terms_agreement" required>
                  <span class="checkbox-text">利用規約に同意する</span>
                </label>
                <label class="checkbox-option">
                  <input type="checkbox" name="agent_service">
                  <span class="checkbox-text">エージェントサービスも申し込む</span>
                </label>
              </div>
               
              <div class="promotion-text">
                今だけアマギフ500円プレゼント！
              </div>
            </div>
          </div>

          <!-- Step 5: サンクスページ -->
          <div class="form-step" data-step="5">
            <div class="thanks-container">
              <div class="thanks-icon"></div>
              <h2 class="thanks-title">ご登録ありがとうございます！</h2>
              <p class="thanks-description">後日登録URLをお送りさせていただきます。</p>
            </div>
          </div>

        </form>

        <!-- Navigation Buttons -->
        <div class="nav-buttons">
          <button type="button" class="btn-back" id="backBtn" style="display: none;">戻る</button>
          <button type="button" class="btn-next" id="nextBtn">次へ</button>
          <button type="submit" class="btn-submit" id="submitBtn" style="display: none;">登録完了！</button>
        </div>
      </div>
    </main>
  </div>

  <script src="js/script.js"></script>
</body>
</html>

/* Reset and Base Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Noto Sans JP', sans-serif;
  background: linear-gradient(135deg, #05A862 0%, #05A862 100%);
  min-height: 100vh;
  color: #181818;
  overflow-x: hidden;
}

.app-container {
  position: relative;
  min-height: 100vh;
  background: linear-gradient(135deg, #05A862 0%, #05A862 100%);
}

/* Background Wave Design */
.app-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23F0F2F4' fill-opacity='0.1' d='M0,96L48,112C96,128,192,160,288,186.7C384,213,480,235,576,213.3C672,192,768,128,864,122.7C960,117,1056,171,1152,181.3C1248,192,1344,160,1392,144L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E") no-repeat bottom;
  background-size: cover;
  pointer-events: none;
}



/* Main Content */
.main-content {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 40px 20px;
  position: relative;
  z-index: 10;
  min-height: 100vh;
}

.form-container {
  background: white;
  border-radius: 25px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
  padding: 40px 30px 30px;
  max-width: 500px;
  width: 100%;
  position: relative;
  overflow: hidden;
}

.form-container::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 120px;
  background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%2305A862' fill-opacity='1' d='M0,160L48,170.7C96,181,192,203,288,197.3C384,192,480,160,576,165.3C672,171,768,213,864,213.3C960,213,1056,171,1152,138.7C1248,107,1344,85,1392,74.7L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E") no-repeat bottom;
  background-size: cover;
  pointer-events: none;
}

/* Progress Indicator */
.progress-indicator {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  margin-bottom: 30px;
}

.step {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  background: #E8E8E8;
  color: #999;
  transition: all 0.3s ease;
}

.step.active {
  background: #05A862;
  color: white;
}

.step.completed {
  background: #05A862;
  color: white;
}



/* Form Steps */
.multi-step-form {
  position: relative;
}

.form-step {
  display: none;
  animation: fadeIn 0.3s ease-in-out;
}

.form-step.active {
  display: block;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.step-title {
  font-size: 18px;
  font-weight: 600;
  color: #181818;
  text-align: center;
  margin-bottom: 20px;
  line-height: 1.4;
}

.step-description {
  font-size: 16px;
  font-weight: 500;
  color: #181818;
  margin-bottom: 8px;
}

.step-note {
  font-size: 14px;
  color: #181818;
  opacity: 0.7;
  margin-bottom: 25px;
}

/* Qualification Grid (Step 1) */
.qualification-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-bottom: 20px;
}

.qualification-option {
  background: #F0F2F4;
  border: 2px solid #F0F2F4;
  border-radius: 15px;
  padding: 15px 20px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  display: block;
}

.qualification-option input[type="checkbox"] {
  display: none;
}

.qualification-option:hover {
  border-color: #05A862;
  background: #F0F2F4;
}

.qualification-option.selected,
.qualification-option input[type="checkbox"]:checked + .qualification-text {
  background: #05A862;
  border-color: #05A862;
  color: white;
}

.qualification-option.selected {
  background: #05A862;
  border-color: #05A862;
  color: white;
}

.qualification-text {
  font-size: 14px;
  font-weight: 500;
  display: block;
}

/* Priority Grid (Step 2) */
.priority-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-bottom: 20px;
}

.priority-option {
  background: #F0F2F4;
  border: 2px solid #F0F2F4;
  border-radius: 15px;
  padding: 15px 20px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  display: block;
}

.priority-option input[type="radio"] {
  display: none;
}

.priority-option:hover {
  border-color: #05A862;
  background: #F0F2F4;
}

.priority-option.selected {
  background: #05A862;
  border-color: #05A862;
  color: white;
}

.priority-text {
  font-size: 14px;
  font-weight: 500;
  display: block;
}

/* Personal Info Form (Step 3) */
.personal-info-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-bottom: 20px;
}

.form-field {
  display: flex;
  flex-direction: column;
}

.form-label {
  font-size: 14px;
  font-weight: 500;
  color: #181818;
  margin-bottom: 8px;
}

.form-input,
.form-select {
  padding: 15px 18px;
  border: 2px solid #F0F2F4;
  border-radius: 12px;
  font-size: 16px;
  background: #F0F2F4;
  transition: border-color 0.3s ease;
  width: 100%;
  color: #181818;
}

.form-input:focus,
.form-select:focus {
  outline: none;
  border-color: #05A862;
  background: white;
}

/* Number input specific styling */
input[type="number"] {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: textfield;
}

input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.form-input::placeholder {
  color: #181818;
  opacity: 0.5;
}

/* Terms Container (Step 4) */
.terms-container {
  margin-bottom: 20px;
}

.terms-text-area {
  background: #F0F2F4;
  border: 2px solid #F0F2F4;
  border-radius: 12px;
  padding: 20px;
  height: 150px;
  overflow-y: auto;
  margin-bottom: 20px;
  font-size: 14px;
  line-height: 1.6;
  color: #181818;
  opacity: 0.8;
}

.checkbox-container {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-bottom: 20px;
}

.checkbox-option {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
}

.checkbox-option input[type="checkbox"] {
  width: 20px;
  height: 20px;
  accent-color: #05A862;
}

.checkbox-text {
  font-size: 14px;
  font-weight: 500;
  color: #181818;
}

.promotion-text {
  background: linear-gradient(135deg, #FCD166 0%, #FCD166 100%);
  color: #181818;
  text-align: center;
  padding: 15px;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 10px;
}

/* Thanks Page (Step 5) */
.thanks-container {
  text-align: center;
  padding: 40px 20px;
}

.thanks-icon {
  width: 80px;
  height: 80px;
  background: #05A862;
  border-radius: 50%;
  margin: 0 auto 25px;
  position: relative;
}

.thanks-icon::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 40px;
  height: 40px;
  background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z'/%3E%3C/svg%3E") no-repeat center;
  background-size: contain;
}

.thanks-title {
  font-size: 22px;
  font-weight: 600;
  color: #181818;
  margin-bottom: 15px;
}

.thanks-description {
  font-size: 16px;
  color: #181818;
  opacity: 0.7;
  line-height: 1.5;
}

/* Navigation Buttons */
.nav-buttons {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 20px;
  position: relative;
  z-index: 20;
}

.btn-back {
  background: #F0F2F4;
  color: #181818;
  border: none;
  padding: 15px 30px;
  border-radius: 25px;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  min-width: 100px;
}

.btn-back:hover {
  background: #E0E2E4;
}

.btn-next,
.btn-submit {
  background: linear-gradient(135deg, #FCD166 0%, #FCD166 100%);
  color: #181818;
  border: none;
  padding: 15px 30px;
  border-radius: 25px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  min-width: 100px;
  margin-left: auto;
}

.btn-next:hover,
.btn-submit:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(252, 209, 102, 0.3);
}

/* Responsive Design */
@media (max-width: 768px) {   
  .main-content {
    padding: 20px 10px;
  }
   
  .form-container {
    padding: 30px 20px 20px;
    border-radius: 20px;
  }
   
  .qualification-grid,
  .priority-grid {
    grid-template-columns: 1fr;
    gap: 10px;
  }
   
  .step-title {
    font-size: 16px;
    margin-bottom: 15px;
  }
   
  .form-input,
  .form-select {
    padding: 12px 15px;
    font-size: 16px;
  }
   
  .nav-buttons {
    flex-direction: column;
    gap: 10px;
  }
   
  .btn-back,
  .btn-next,
  .btn-submit {
    width: 100%;
    margin: 0;
  }
}

@media (max-width: 480px) {
  .progress-indicator {
    gap: 5px;
  }
   
  .step {
    width: 30px;
    height: 30px;
    font-size: 12px;
  }
   
  .step-icon {
    width: 35px;
    height: 35px;
  }
   
  .qualification-option,
  .priority-option {
    padding: 12px 15px;
  }
   
  .qualification-text,
  .priority-text {
    font-size: 13px;
  }
}

// Multi-Step Form Controller
class MultiStepForm {
  constructor() {
    this.currentStep = 1;
    this.totalSteps = 5;
    this.formData = {};
     
    this.init();
  }

  init() {
    this.bindEvents();
    this.updateUI();
  }

  bindEvents() {
    // Navigation buttons
    const nextBtn = document.getElementById('nextBtn');
    const backBtn = document.getElementById('backBtn');
    const submitBtn = document.getElementById('submitBtn');

    nextBtn.addEventListener('click', () => this.nextStep());
    backBtn.addEventListener('click', () => this.prevStep());
    submitBtn.addEventListener('click', (e) => this.submitForm(e));

    // Priority selection (Step 1)
    this.bindPrioritySelection();
     
    // Qualification selection (Step 2)
    this.bindQualificationSelection();
     
    // Form inputs (Step 3)
    this.bindFormInputs();
     
    // Terms agreement (Step 4)
    this.bindTermsAgreement();
  }

  bindQualificationSelection() {
    const qualificationOptions = document.querySelectorAll('.qualification-option');
     
    qualificationOptions.forEach(option => {
      option.addEventListener('click', (e) => {
        e.preventDefault();
         
        const checkbox = option.querySelector('input[type="checkbox"]');
        const isSelected = option.classList.contains('selected');
         
        if (isSelected) {
          option.classList.remove('selected');
          checkbox.checked = false;
        } else {
          option.classList.add('selected');
          checkbox.checked = true;
        }
         
        this.updateFormData('qualifications', this.getSelectedQualifications());
      });
    });
  }

  bindPrioritySelection() {
    const priorityOptions = document.querySelectorAll('.priority-option');
     
    priorityOptions.forEach(option => {
      option.addEventListener('click', (e) => {
        e.preventDefault();
         
        // Remove selection from all options
        priorityOptions.forEach(opt => {
          opt.classList.remove('selected');
          opt.querySelector('input[type="radio"]').checked = false;
        });
         
        // Add selection to clicked option
        option.classList.add('selected');
        const radio = option.querySelector('input[type="radio"]');
        radio.checked = true;
         
        this.updateFormData('priority', radio.value);
      });
    });
  }

  bindFormInputs() {
    const inputs = document.querySelectorAll('.form-input, .form-select');
     
    inputs.forEach(input => {
      input.addEventListener('input', (e) => {
        this.updateFormData(e.target.name, e.target.value);
      });
    });
  }

  bindTermsAgreement() {
    const checkboxes = document.querySelectorAll('.checkbox-option input[type="checkbox"]');
     
    checkboxes.forEach(checkbox => {
      checkbox.addEventListener('change', (e) => {
        this.updateFormData(e.target.name, e.target.checked);
      });
    });
  }

  getSelectedQualifications() {
    const selected = [];
    const checkboxes = document.querySelectorAll('.qualification-option input[type="checkbox"]:checked');
     
    checkboxes.forEach(checkbox => {
      selected.push(checkbox.value);
    });
     
    return selected;
  }

  updateFormData(key, value) {
    this.formData[key] = value;
    console.log('Form Data Updated:', this.formData);
  }

  validateCurrentStep() {
    switch (this.currentStep) {
      case 1:
        return this.validatePriority();
      case 2:
        return this.validateQualifications();
      case 3:
        return this.validatePersonalInfo();
      case 4:
        return this.validateTerms();
      default:
        return true;
    }
  }

  validateQualifications() {
    const selected = this.getSelectedQualifications();
    if (selected.length === 0) {
      this.showError('資格を少なくとも1つ選択してください。');
      return false;
    }
    return true;
  }

  validatePriority() {
    const selected = document.querySelector('.priority-option input[type=\"radio\"]:checked');
    if (!selected) {
      this.showError('重視する項目を選択してください。');
      return false;
    }
    return true;
  }

  validatePersonalInfo() {
    const requiredFields = ['address', 'name', 'age', 'phone', 'email'];
    const missingFields = [];
     
    requiredFields.forEach(field => {
      const input = document.querySelector(`input[name=\"${field}\"]`);
      if (!input || !input.value.trim()) {
        missingFields.push(field);
      }
    });
     
    if (missingFields.length > 0) {
      this.showError('すべての必須項目を入力してください。');
      return false;
    }
     
    // Age validation
    const age = parseInt(document.querySelector('input[name=\"age\"]').value);
    if (age < 18 || age > 100) {
      this.showError('年齢は18歳以上100歳以下で入力してください。');
      return false;
    }
     
    // Email validation
    const email = document.querySelector('input[name=\"email\"]').value;
    if (!this.isValidEmail(email)) {
      this.showError('有効なメールアドレスを入力してください。');
      return false;
    }
     
    return true;
  }

  validateTerms() {
    const termsAgreement = document.querySelector('input[name=\"terms_agreement\"]');
    if (!termsAgreement || !termsAgreement.checked) {
      this.showError('利用規約に同意してください。');
      return false;
    }
    return true;
  }

  isValidEmail(email) {
    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;
    return emailRegex.test(email);
  }

  showError(message) {
    // Remove existing error message
    const existingError = document.querySelector('.error-message');
    if (existingError) {
      existingError.remove();
    }
     
    // Create and show new error message
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-message';
    errorDiv.style.cssText = `
      background: #e74c3c;
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      margin: 10px 0;
      font-size: 14px;
      text-align: center;
      animation: slideIn 0.3s ease;
    `;
    errorDiv.textContent = message;
     
    const navButtons = document.querySelector('.nav-buttons');
    navButtons.parentNode.insertBefore(errorDiv, navButtons);
     
    // Auto remove after 5 seconds
    setTimeout(() => {
      if (errorDiv.parentNode) {
        errorDiv.remove();
      }
    }, 5000);
  }

  nextStep() {
    if (!this.validateCurrentStep()) {
      return;
    }
     
    if (this.currentStep < this.totalSteps) {
      this.currentStep++;
      this.updateUI();
    }
  }

  prevStep() {
    if (this.currentStep > 1) {
      this.currentStep--;
      this.updateUI();
    }
  }

  updateUI() {
    this.updateSteps();
    this.updateProgressIndicator();
    this.updateButtons();
     
    // Smooth scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  updateSteps() {
    const steps = document.querySelectorAll('.form-step');
     
    steps.forEach((step, index) => {
      const stepNumber = index + 1;
      if (stepNumber === this.currentStep) {
        step.classList.add('active');
      } else {
        step.classList.remove('active');
      }
    });
  }

  updateProgressIndicator() {
    const progressSteps = document.querySelectorAll('.progress-indicator .step');
     
    progressSteps.forEach((step, index) => {
      const stepNumber = index + 1;
       
      if (stepNumber < this.currentStep) {
        step.classList.add('completed');
        step.classList.remove('active');
      } else if (stepNumber === this.currentStep) {
        step.classList.add('active');
        step.classList.remove('completed');
      } else {
        step.classList.remove('active', 'completed');
      }
    });
  }

  updateButtons() {
    const nextBtn = document.getElementById('nextBtn');
    const backBtn = document.getElementById('backBtn');
    const submitBtn = document.getElementById('submitBtn');
     
    // Back button
    if (this.currentStep === 1) {
      backBtn.style.display = 'none';
    } else {
      backBtn.style.display = 'block';
    }
     
    // Next/Submit buttons
    if (this.currentStep === this.totalSteps) {
      nextBtn.style.display = 'none';
      submitBtn.style.display = 'none'; // Hide submit on thank you page
    } else if (this.currentStep === this.totalSteps - 1) {
      nextBtn.style.display = 'none';
      submitBtn.style.display = 'block';
    } else {
      nextBtn.style.display = 'block';
      submitBtn.style.display = 'none';
    }
  }

  async submitForm(e) {
    e.preventDefault();
     
    if (!this.validateCurrentStep()) {
      return;
    }
     
    try {
      // Show loading state
      const submitBtn = document.getElementById('submitBtn');
      const originalText = submitBtn.textContent;
      submitBtn.textContent = '送信中...';
      submitBtn.disabled = true;
       
      // Simulate form submission
      await this.simulateFormSubmission();
       
      // Move to thank you page
      this.currentStep++;
      this.updateUI();
       
      // Reset button state
      submitBtn.textContent = originalText;
      submitBtn.disabled = false;
       
    } catch (error) {
      console.error('Form submission error:', error);
      this.showError('送信エラーが発生しました。もう一度お試しください。');
       
      // Reset button state
      const submitBtn = document.getElementById('submitBtn');
      submitBtn.textContent = '登録完了！';
      submitBtn.disabled = false;
    }
  }

  async simulateFormSubmission() {
    // Simulate API call delay
    return new Promise((resolve) => {
      setTimeout(() => {
        console.log('Form submitted successfully:', this.formData);
        resolve();
      }, 1500);
    });
  }
}

// Custom CSS for error messages
const errorStyles = document.createElement('style');
errorStyles.textContent = `
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
   
  .error-message {
    animation: slideIn 0.3s ease;
  }
`;
document.head.appendChild(errorStyles);

// Initialize the form when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  new MultiStepForm();
});

// Additional UI enhancements
document.addEventListener('DOMContentLoaded', () => {
  // Add smooth transitions to form elements
  const formElements = document.querySelectorAll('.form-input, .form-select, .qualification-option, .priority-option');
   
  formElements.forEach(element => {
    element.addEventListener('focusin', function() {
      this.style.transform = 'scale(1.02)';
    });
     
    element.addEventListener('focusout', function() {
      this.style.transform = 'scale(1)';
    });
  });
   
  // Add ripple effect to buttons
  const buttons = document.querySelectorAll('.btn-next, .btn-submit, .qualification-option, .priority-option');
   
  buttons.forEach(button => {
    button.addEventListener('click', function(e) {
      const ripple = document.createElement('span');
      const rect = this.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height);
      const x = e.clientX - rect.left - size / 2;
      const y = e.clientY - rect.top - size / 2;
       
      ripple.style.cssText = `
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: scale(0);
        animation: ripple 0.6s linear;
        width: ${size}px;
        height: ${size}px;
        left: ${x}px;
        top: ${y}px;
        pointer-events: none;
      `;
       
      this.style.position = 'relative';
      this.style.overflow = 'hidden';
      this.appendChild(ripple);
       
      setTimeout(() => {
        ripple.remove();
      }, 600);
    });
  });
   
  // Add ripple animation
  const rippleAnimation = document.createElement('style');
  rippleAnimation.textContent = `
    @keyframes ripple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }
  `;
  document.head.appendChild(rippleAnimation);
});
